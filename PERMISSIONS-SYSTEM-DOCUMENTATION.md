# ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช - MOTABEA
## Advanced Permissions Management System

### ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุงุญุชุฑุงูู ููุชูุงูู ูุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ูู ูุธุงู MOTABEA ูุฅุฏุงุฑุฉ ุงููุฏุงุฑุณ. ูููุฑ ุงููุธุงู ุชุญููุงู ุฏูููุงู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏููู ูุน ุฅููุงููุฉ ุงูุฏุฎูู ุงูุณุฑูุน.

---

## โจ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุงูุดุงููุฉ
- โ ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ ุจุทุฑู ูุชุนุฏุฏุฉ:
  - ูู ูุงุฆูุฉ ุงููุนูููู
  - ูู ูุงุฆูุฉ ุงูุฅุฏุงุฑููู
  - ุฅุฏุฎุงู ูุฏูู ูุจุงุดุฑ
- โ ุชุนุฏูู ุจูุงูุงุช ุงููุณุชุฎุฏููู
- โ ุญุฐู ุงููุณุชุฎุฏููู
- โ ุชูุนูู/ุชุนุทูู ุงูุญุณุงุจุงุช
- โ ุนุฑุถ ุณุฌู ูุดุงุทุงุช ุงููุณุชุฎุฏููู

### 2. ูุธุงู ุงูุตูุงุญูุงุช ุงููุชูุฏู
- โ 4 ูุณุชููุงุช ุตูุงุญูุฉ ูุนุฑูุฉ ูุณุจูุงู:
  - **ูุฏูุฑ ุงููุธุงู (Admin)**: ุตูุงุญูุงุช ูุงููุฉ
  - **ูุฏูุฑ (Manager)**: ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ
  - **ูุณุชุฎุฏู (User)**: ุตูุงุญูุงุช ูุญุฏูุฏุฉ
  - **ูุฎุตุต (Custom)**: ุชุฎุตูุต ูุฏูู ููุตูุงุญูุงุช

### 3. ุตูุงุญูุงุช ุนูู ูุณุชูู ุงูุฃูุณุงู
ูููู ููุญ ุงูุตูุงุญูุงุช ูู 13 ูุณู:
- ููุญุฉ ุงูุชุญูู
- ุงููุนูููู
- ุงูุทูุงุจ
- ุงูุฌุฏูู ุงูุฏุฑุงุณู
- ุงูุฅุดุฑุงู
- ุงูุงูุชุธุงุฑ ุงููููู
- ุงูุณููู ูุงูุญุถูุฑ
- ููุงุฐุฌ ุงูุทูุงุจ
- ุงูุฑุณุงุฆู
- ุงูููุงู
- ุงูุชูุงุฑูุฑ
- ุงูุฅุนุฏุงุฏุงุช
- ุงูุฅุนุฏุงุฏุงุช ุงูุฃูููุฉ

### 4. ุฃููุงุน ุงูุตูุงุญูุงุช ููู ูุณู
- ๐๏ธ **ุนุฑุถ (View)**: ุนุฑุถ ุงูุจูุงูุงุช ููุท
- โ **ุฅุถุงูุฉ (Create)**: ุฅูุดุงุก ุณุฌูุงุช ุฌุฏูุฏุฉ
- โ๏ธ **ุชุนุฏูู (Edit)**: ุชุนุฏูู ุงูุณุฌูุงุช ุงูููุฌูุฏุฉ
- ๐๏ธ **ุญุฐู (Delete)**: ุญุฐู ุงูุณุฌูุงุช
- ๐ค **ุชุตุฏูุฑ (Export)**: ุชุตุฏูุฑ ุงูุจูุงูุงุช
- ๐จ๏ธ **ุทุจุงุนุฉ (Print)**: ุทุจุงุนุฉ ุงูุชูุงุฑูุฑ

### 5. ูุธุงู ุงูุฏุฎูู ุงูุณุฑูุน (Quick Access)
- ๐ข ุฑูู ุฏุฎูู ูููู ูู 4 ุฃุฑูุงู
- โก ุฏุฎูู ุณุฑูุน ุจุฏูู ุงุณู ูุณุชุฎุฏู ููููุฉ ูุฑูุฑ
- ๐ ุฅููุงููุฉ ุฅุนุงุฏุฉ ุชูููุฏ ุงูุฑูู
- ๐ ุฃูุงู ุนุงูู ูุน ุชุดููุฑ
- ๐จ ูุงุฌูุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ ูุน ููุญุฉ ุฃุฑูุงู

### 6. ุงูุจุญุซ ูุงูุชุตููุฉ ุงููุชูุฏูุฉ
- ๐ ุงูุจุญุซ ุจู:
  - ุงูุงุณู
  - ุงุณู ุงููุณุชุฎุฏู
  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  - ุฑูู ุงูุฌูุงู
  - ุฑูู ุงูุฏุฎูู ุงูุณุฑูุน
- ๐ฏ ุงูุชุตููุฉ ุญุณุจ:
  - ูุณุชูู ุงูุตูุงุญูุฉ
  - ุงููุตุฏุฑ (ูุนูู/ุฅุฏุงุฑู/ูุฏูู)
  - ุงูุญุงูุฉ (ูุดุท/ุบูุฑ ูุดุท)

### 7. ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
- ๐ ุฅุญุตุงุฆูุงุช ุดุงููุฉ:
  - ุฅุฌูุงูู ุงููุณุชุฎุฏููู
  - ุงููุณุชุฎุฏููู ุงููุดุทูู
  - ุชูุฒูุน ุญุณุจ ุงููุณุชูู
  - ุชูุฒูุน ุญุณุจ ุงููุตุฏุฑ
- ๐ ุณุฌู ูุงูู ููุชุบููุฑุงุช
- ๐ ุนุฑุถ ุชูุตููู ูุตูุงุญูุงุช ูู ูุณุชุฎุฏู

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ุงูุฑุฆูุณูุฉ
- ุจุทุงูุงุช ุฅุญุตุงุฆูุงุช ููููุฉ
- ุฌุฏูู ุดุงูู ูุนุฑุถ ุงููุณุชุฎุฏููู
- ุฃุฒุฑุงุฑ ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ
- ุชุตููู ูุชุฌุงูุจ ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ

### ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู ุงููุณุชุฎุฏู
- ุชูุณูู ูุงุถุญ ูููุนูููุงุช
- ุงุฎุชูุงุฑ ุจุตุฑู ููุณุชูู ุงูุตูุงุญูุฉ
- ุตูุงุญูุงุช ูุฌูุนุฉ ุญุณุจ ุงููุฆุงุช
- ุชูุนูู/ุชุนุทูู ุณุฑูุน ููุฃูุณุงู
- ุชุญุฏูุฏ ุตูุงุญูุงุช ูุญุฏุฏุฉ ููู ูุณู

### ูููุฐุฌ ุนุฑุถ ุงูุตูุงุญูุงุช
- ุนุฑุถ ุชูุตููู ููู ุงูุตูุงุญูุงุช
- ูุคุดุฑุงุช ุจุตุฑูุฉ ูุงุถุญุฉ
- ุฅุญุตุงุฆูุงุช ุงูุตูุงุญูุงุช
- ุณุฌู ุงููุดุงุท

### ูููุฐุฌ ุงูุฏุฎูู ุงูุณุฑูุน
- ุชุตููู ุนุตุฑู ูุฌุฐุงุจ
- ููุญุฉ ุฃุฑูุงู ุชูุงุนููุฉ
- ุฏุนู ููุญุฉ ุงูููุงุชูุญ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู

#### 1. ุฌุฏูู `users`
```sql
- id: ูุนุฑู ูุฑูุฏ
- username: ุงุณู ุงููุณุชุฎุฏู (ูุฑูุฏ)
- name: ุงูุงุณู ุงููุงูู
- email: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- phone: ุฑูู ุงูุฌูุงู
- password: ูููุฉ ุงููุฑูุฑ (ูุดูุฑุฉ)
- quick_access_pin: ุฑูู ุงูุฏุฎูู ุงูุณุฑูุน (4 ุฃุฑูุงูุ ูุฑูุฏ)
- access_level: ูุณุชูู ุงูุตูุงุญูุฉ
- source: ูุตุฏุฑ ุงูุจูุงูุงุช
- source_id: ูุนุฑู ุงููุตุฏุฑ
- is_active: ุญุงูุฉ ุงูุญุณุงุจ
- created_by: ูู ูุงู ุจุฅูุดุงุก ุงูุญุณุงุจ
- created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
- updated_at: ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ
- last_login: ุขุฎุฑ ุชุณุฌูู ุฏุฎูู
```

#### 2. ุฌุฏูู `user_permissions`
```sql
- id: ูุนุฑู ูุฑูุฏ
- user_id: ูุนุฑู ุงููุณุชุฎุฏู
- module: ุงุณู ุงููุณู
- actions: JSON ููุตูุงุญูุงุช
- enabled: ุญุงูุฉ ุงูุชูุนูู
- created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
- updated_at: ุชุงุฑูุฎ ุงูุชุญุฏูุซ
```

#### 3. ุฌุฏูู `permission_logs`
```sql
- id: ูุนุฑู ูุฑูุฏ
- user_id: ูุนุฑู ุงููุณุชุฎุฏู
- user_name: ุงุณู ุงููุณุชุฎุฏู
- action: ููุน ุงูุฅุฌุฑุงุก
- details: ุชูุงุตูู ุงูุฅุฌุฑุงุก
- performed_by: ูู ูุงู ุจุงูุฅุฌุฑุงุก
- performed_by_name: ุงุณู ูู ูุงู ุจุงูุฅุฌุฑุงุก
- ip_address: ุนููุงู IP
- timestamp: ููุช ุงูุฅุฌุฑุงุก
```

---

## ๐ API Endpoints

### ุงููุณุชุฎุฏููู

#### `GET /api/permissions/users`
ุฌูุจ ุฌููุน ุงููุณุชุฎุฏููู ูุน ุฅููุงููุฉ ุงูุจุญุซ ูุงูุชุตููุฉ

**Query Parameters:**
- `search`: ูุต ุงูุจุญุซ
- `accessLevel`: ูุณุชูู ุงูุตูุงุญูุฉ
- `source`: ุงููุตุฏุฑ
- `isActive`: ุญุงูุฉ ุงููุดุงุท

**Response:**
```json
{
  "success": true,
  "users": [...]
}
```

#### `GET /api/permissions/users/:id`
ุฌูุจ ุจูุงูุงุช ูุณุชุฎุฏู ูุงุญุฏ

#### `POST /api/permissions/users`
ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ

**Request Body:**
```json
{
  "username": "string",
  "name": "string",
  "email": "string",
  "phone": "string",
  "password": "string",
  "quickAccessPin": "string",
  "accessLevel": "admin|manager|user|custom",
  "permissions": [...],
  "source": "teacher|administrator|manual",
  "sourceId": "string"
}
```

#### `PUT /api/permissions/users/:id`
ุชุญุฏูุซ ุจูุงูุงุช ูุณุชุฎุฏู

#### `DELETE /api/permissions/users/:id`
ุญุฐู ูุณุชุฎุฏู

### ุงูุฏุฎูู ุงูุณุฑูุน

#### `POST /api/permissions/quick-access-login`
ุชุณุฌูู ุฏุฎูู ุจุงูุฑูู ุงูุณุฑูุน

**Request Body:**
```json
{
  "pin": "1234"
}
```

**Response:**
```json
{
  "success": true,
  "user": {...},
  "token": "jwt-token"
}
```

### ุงูุฅุญุตุงุฆูุงุช

#### `GET /api/permissions/stats`
ุฌูุจ ุฅุญุตุงุฆูุงุช ุงูุตูุงุญูุงุช

#### `GET /api/permissions/logs`
ุฌูุจ ุณุฌู ุงูุชุบููุฑุงุช

---

## ๐ง ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุชุดุบูู ุณูุฑูุจุช ุฅูุดุงุก ุงูุฌุฏุงูู
mysql -u root -p motabea < server/database/permissions_schema.sql
```

### 2. ุชุญุฏูุซ ููู ุงูุฎุงุฏู

ูู ููู `server/index.js`ุ ุฃุถู:

```javascript
const permissionsRoutes = require('./routes/permissions');

// ุจุนุฏ ุชุนุฑูู ุงูุฑุงูุชุฑุงุช ุงูุฃุฎุฑู
app.use('/api/permissions', permissionsRoutes);
```

### 3. ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ

```bash
npm install bcrypt jsonwebtoken
```

### 4. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ูู ููู `.env`:

```env
JWT_SECRET=your-secret-key-here
```

---

## ๐ ุฏููู ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ

1. ุงูุชูู ุฅูู ุตูุญุฉ **ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช**
2. ุงุถุบุท ุนูู **ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ**
3. ุงููุฃ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
4. ุงุฎุชุฑ ูุณุชูู ุงูุตูุงุญูุฉ ุฃู ูู ุจุงูุชุฎุตูุต
5. ุญุฏุฏ ุงูุฃูุณุงู ูุงูุตูุงุญูุงุช ุงููุทููุจุฉ
6. ุงุถุบุท **ุญูุธ**

### ููุญ ุตูุงุญูุงุช ููุณุชุฎุฏู

1. ุงุจุญุซ ุนู ุงููุณุชุฎุฏู ูู ุงูุฌุฏูู
2. ุงุถุบุท ุนูู ุฃููููุฉ **ุงูุชุนุฏูู** (โ๏ธ)
3. ุงุฎุชุฑ **ูุฎุตุต** ูู ูุณุชูู ุงูุตูุงุญูุฉ
4. ูุนูู ุงูุฃูุณุงู ุงููุทููุจุฉ
5. ุญุฏุฏ ุงูุตูุงุญูุงุช ููู ูุณู
6. ุงุญูุธ ุงูุชุบููุฑุงุช

### ุงุณุชุฎุฏุงู ุงูุฏุฎูู ุงูุณุฑูุน

1. ูู ุตูุญุฉ ุงูุตูุงุญูุงุชุ ุงุถุบุท **ุงูุฏุฎูู ุงูุณุฑูุน**
2. ุฃุฏุฎู ุงูุฑูู ุงููููู ูู 4 ุฃุฑูุงู
3. ุฃู ุงุณุชุฎุฏู ููุญุฉ ุงูุฃุฑูุงู
4. ุณูุชู ุชุณุฌูู ุงูุฏุฎูู ุชููุงุฆูุงู

### ุนุฑุถ ุตูุงุญูุงุช ูุณุชุฎุฏู

1. ุงุถุบุท ุนูู ุฃููููุฉ **ุงูุนุฑุถ** (๐๏ธ) ุจุฌุงูุจ ุงููุณุชุฎุฏู
2. ุณุชุธูุฑ ูุงูุฐุฉ ุชุนุฑุถ:
   - ุฅุญุตุงุฆูุงุช ุงูุตูุงุญูุงุช
   - ุชูุงุตูู ูู ูุณู
   - ุงูุตูุงุญูุงุช ุงูููููุญุฉ
   - ูุนูููุงุช ุงูุญุณุงุจ

---

## ๐ ุงูุฃูุงู

### ุงูุชุดููุฑ
- ูููุงุช ุงููุฑูุฑ ูุดูุฑุฉ ุจู bcrypt
- JWT tokens ูููุตุงุฏูุฉ
- ุฑูู ุงูุฏุฎูู ุงูุณุฑูุน ูุดูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุญูุงูุฉ
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุนูู ูุณุชูู API
- ููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู
- ุณุฌู ูุงูู ูุฌููุน ุงูุฅุฌุฑุงุกุงุช
- ููุน ุชูุฑุงุฑ ุฃุณูุงุก ุงููุณุชุฎุฏููู ูุฃุฑูุงู ุงูุฏุฎูู

### Best Practices
- ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ
- ุบููุฑ ุฑูู ุงูุฏุฎูู ุงูุณุฑูุน ุฏูุฑูุงู
- ุฑุงุฌุน ุณุฌู ุงูุตูุงุญูุงุช ุจุงูุชุธุงู
- ูุนูู ููุท ุงูุตูุงุญูุงุช ุงููุทููุจุฉ

---

## ๐ฏ ุงููููุงุช ุงููุถุงูุฉ

### Frontend
```
src/
โโโ types/
โ   โโโ permissions.ts              # ุชุนุฑููุงุช TypeScript
โโโ pages/
โ   โโโ Dashboard/
โ       โโโ PermissionsPage.tsx     # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โโโ components/
โ   โโโ Permissions/
โ       โโโ UserFormModal.tsx       # ูููุฐุฌ ุงูุฅุถุงูุฉ/ุงูุชุนุฏูู
โ       โโโ PermissionsViewModal.tsx # ูููุฐุฌ ุงูุนุฑุถ
โ       โโโ QuickAccessLogin.tsx    # ูููุฐุฌ ุงูุฏุฎูู ุงูุณุฑูุน
```

### Backend
```
server/
โโโ routes/
โ   โโโ permissions.js              # API Routes
โโโ database/
    โโโ permissions_schema.sql      # ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

---

## ๐ ุงูููุฒุงุช ุงููุณุชูุจููุฉ

- [ ] ุงูุชูุงูู ูุน ูุธุงู ุงูุชูุจููุงุช
- [ ] ุชุตุฏูุฑ ุชูุงุฑูุฑ ุงูุตูุงุญูุงุช
- [ ] ุฅุดุนุงุฑุงุช ุงูุชุบููุฑุงุช ุงููุงูุฉ
- [ ] ุตูุงุญูุงุช ูุคูุชุฉ ุจูุฏุฉ ูุญุฏุฏุฉ
- [ ] ุตูุงุญูุงุช ุนูู ูุณุชูู ุงูุณุฌูุงุช
- [ ] ูุตุงุฏูุฉ ุซูุงุฆูุฉ (2FA)
- [ ] ุฏุนู ุงูุจุตูุฉ ููุฏุฎูู ุงูุณุฑูุน

---

## ๐ ุงูุฏุนู ุงูููู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---

## ๐ ููุงุญุธุงุช ูุงูุฉ

1. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุฃู ุชุญุฏูุซ
2. **ุงูุงุฎุชุจุงุฑ**: ุงุฎุชุจุฑ ุงููุธุงู ูู ุจูุฆุฉ ุชุทููุฑ ูุจู ุงููุดุฑ
3. **ุงูุตูุงุญูุงุช**: ูุง ุชููุญ ุตูุงุญูุงุช ุงููุฏูุฑ ุฅูุง ูููุณุชุฎุฏููู ุงูููุซูููู
4. **ุงููุฑุงุฌุนุฉ**: ุฑุงุฌุน ุณุฌู ุงูุตูุงุญูุงุช ุจุดูู ุฏูุฑู

---

## โ ุงูุชูู ุงูุชุทููุฑ

โจ ุชู ุชุทููุฑ ูุธุงู ุงูุตูุงุญูุงุช ุจูุฌุงุญ ููู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

**ุชุงุฑูุฎ ุงูุชุทููุฑ**: 10 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุฅูุชุงุฌ
