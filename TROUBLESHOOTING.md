# دليل استكشاف الأخطاء وإصلاحها - نظام متابع

## مشاكل تسجيل الدخول الشائعة

### 1. عدم القدرة على تسجيل الدخول
**الأعراض:** رسالة خطأ "اسم المستخدم أو كلمة المرور غير صحيحة"

**الحلول:**
- تأكد من تشغيل الخادم الخلفي: `node server/index.js`
- تأكد من كتابة اسم المستخدم وكلمة المرور بدقة
- احذف ملفات تعريف الارتباط والبيانات المحفوظة في المتصفح
- أعد تشغيل كلا من الخادم الأمامي والخلفي

**الحسابات التجريبية المتاحة:**
- مدير النظام: `admin` / `admin123`

### 2. عدم الانتقال لصفحة لوحة التحكم
**الأعراض:** البقاء في صفحة تسجيل الدخول رغم إدخال بيانات صحيحة

**الحلول:**
1. افتح أدوات المطور في المتصفح (F12)
2. انتقل لتبويب Console
3. ابحث عن رسائل خطأ
4. امحِ localStorage: `localStorage.clear()`
5. أعد تحميل الصفحة

### 3. مشاكل في الخادم
**الأعراض:** رسائل خطأ "خطأ في الخادم" أو "فشل في الاتصال"

**الحلول:**
1. تأكد من تشغيل الخادم على المنفذ 5000
2. تحقق من عدم وجود تطبيقات أخرى تستخدم المنفذ
3. أعد تشغيل الخادم:
   ```bash
   # أوقف الخادم بـ Ctrl+C
   node server/index.js
   ```

### 4. مشاكل CORS
**الأعراض:** رسائل خطأ تتعلق بـ Cross-Origin

**الحلول:**
- تأكد من تشغيل الواجهة الأمامية على المنفذ 3000
- تأكد من تشغيل الخادم الخلفي على المنفذ 5000
- أعد تشغيل كلا الخادمين

## إعادة تعيين النظام بالكامل

إذا واجهت مشاكل مستمرة، اتبع هذه الخطوات:

1. **إيقاف جميع العمليات:**
   ```bash
   # اضغط Ctrl+C في جميع نوافذ Terminal المفتوحة
   ```

2. **مسح البيانات المحفوظة:**
   ```javascript
   // في Console المتصفح
   localStorage.clear();
   sessionStorage.clear();
   ```

3. **إعادة تشغيل الخادم الخلفي:**
   ```bash
   cd "C:\Users\fasoo\OneDrive\Desktop\MOTABEA"
   node server/index.js
   ```

4. **إعادة تشغيل الخادم الأمامي:**
   ```bash
   cd "C:\Users\fasoo\OneDrive\Desktop\MOTABEA"
   npm run dev
   ```

5. **اختبار تسجيل الدخول:**
   - استخدم `admin` / `admin123`
   - تأكد من فتح المتصفح على `http://localhost:3000`

## معلومات إضافية

### ملفات مهمة:
- `src/contexts/AuthContext.tsx` - سياق المصادقة
- `server/index.js` - الخادم الخلفي
- `src/pages/LoginPage.tsx` - صفحة تسجيل الدخول
- `.env` - متغيرات البيئة

### أوامر مفيدة:
```bash
# تشغيل الخادم الأمامي
npm run dev

# تشغيل الخادم الخلفي
node server/index.js

# تشغيل كلا الخادمين معاً
npm start

# فحص حالة المنافذ
netstat -an | findstr :3000
netstat -an | findstr :5000
```

### سجلات الأخطاء:
- تحقق من Console المتصفح للأخطاء الأمامية
- تحقق من Terminal الخادم للأخطاء الخلفية
- ابحث عن رسائل تبدأ بـ "Login error:" أو "Auth verify error:"
